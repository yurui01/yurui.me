---
title: Potree开发笔记-0：快速开始
date: 2023-03-12 19:17:59
summary: 本文介绍了 Potree 作为一种用于 Web 上展示点云数据的开源框架的概述，解释了其数据结构和浏览器支持，同时提供了针对调试和生产环境的安装方法及示例运行方式。同时也对点云数据的格式和导入方式的基本讲解进行了简述。
---


# 开始

## 总览

Potree 是一种用于 Web 上展示点云数据的开源框架。点云是由大量的点组成的三维模型，通常用于描述物体的形状、尺寸和表面细节。Potree 可以将大规模的点云数据加载到网页上，并提供高性能、交互式的三维浏览体验。Potree 支持多种点云格式，并且可以在现代浏览器上运行，无需任何插件或软件。Potree 的主要应用领域包括测绘、建筑、文物保护、地质勘探等。

## 数据结构
其数据结构主要由以下几个组成：

- PointCloud：点云数据集，由多个点(Point)组成。
- Octree：八叉树，将点云数据集划分为一系列的八叉树节点(Node)。每个节点都对应一个边界框(Bounding Box)，用于表示点云数据在空间中的位置和范围。
- Node：八叉树节点，包含了点云数据的子集和边界框信息。当需要渲染某个区域时，只需要将对应的节点加载到内存中即可，避免了不必要的数据加载和渲染。
- Point：点云中的一个点，包含了位置信息和颜色信息等属性。

通过这种数据结构，Potree可以高效地渲染海量点云数据，并支持多种交互操作，如缩放、旋转、平移等。此外，Potree还支持点云的级联加载(Cascaded Loading)，可以根据视口的位置和大小自适应地加载点云数据，提高了渲染效率。

## 浏览器支持

Potree 支持现代浏览器，包括 Google Chrome、Mozilla Firefox、Microsoft Edge、Safari 等主流浏览器。它使用 Web 技术（例如 WebGL、Web Workers、Typed Arrays 等）来实现高性能的点云渲染和交互。对于较老版本的浏览器，可能需要开启某些功能（例如 WebGL）或安装插件才能正确运行 Potree。此外，Potree 还提供了基于 Electron 的离线应用程序，可在 Windows、macOS 和 Linux 操作系统上运行。

## 运行环境安装

### 调试环境

#### 下载源码

下载 Potree：可以从 Potree 的 GitHub 仓库中下载最新版本的 Potree，地址为 https://github.com/potree/potree/releases。

#### 安装 nodejs

1. 前往 Node.js 官网：在您的 Web 浏览器中访问 https://nodejs.org/。

2. 下载 Node.js 安装包：在 Node.js 官网首页上，您可以找到当前版本的 Node.js。选择适合您操作系统的版本，然后下载相应的安装包。

3. 安装 Node.js：运行下载的 Node.js 安装包，按照安装程序的提示进行安装。默认情况下，Node.js 会被安装到您的计算机上的默认位置。

4. 检查 Node.js 是否安装成功：打开终端或命令提示符，并输入以下命令：

```bash
node -v
```

如果安装成功，应该能够看到 Node.js 的版本号。

#### 安装依赖

进入potree源码根目录

```
npm install
```

#### 运行示例

```
npm start
```

打开浏览器访问`http://localhost:1234`就可以看到potree官方示例

### 生产环境

Potree 本身是一个基于 JavaScript 的 Web 应用程序，无需安装，只需要将 Potree 的文件部署到 Web 服务器上即可。可以按照以下步骤进行部署和运行：

#### 下载 Potree
可以从 Potree 的 GitHub 仓库中下载最新版本的 Potree，地址为 https://github.com/potree/potree/releases。

#### 部署 Potree 文件
将下载的 Potree 文件解压缩后，将其部署到您的 Web 服务器上。可以使用任何 Web 服务器软件，例如 Apache、Nginx 等。将 Potree 文件夹放置在 Web 服务器根目录下的任意位置即可。

#### 将点云数据导入 Potree
在 Potree 文件夹中找到 pointclouds 文件夹，将您的点云数据文件复制到该文件夹中。Potree 支持多种点云数据格式，例如 LAS、LAZ、XYZ、PLY 等。更多关于点云数据的格式和导入方式，请参考 Potree 的官方文档。

#### 在浏览器中打开 Potree
使用任何现代浏览器（例如 Google Chrome、Mozilla Firefox、Microsoft Edge、Safari 等）打开 Potree 所在的 URL。如果您的 Potree 文件夹位于 Web 服务器的根目录下，URL 可以是 http://yourdomain.com/potree。在打开的网页中，您应该能够看到您的点云数据在 Potree 中呈现出来。

*注意：在导入大规模的点云数据时，需要考虑服务器的硬件配置和网络带宽等因素。如果您的点云数据过大，可能需要使用分块技术来提高加载速度和性能。更多关于分块技术的信息，请参考 Potree 的官方文档。*
